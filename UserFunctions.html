
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>User-defined functions &#8212; APL Cultivations</title>
    
  <link href="_static/css/theme.css" rel="stylesheet">
  <link href="_static/css/index.ff1ffe594081f20da1ef19478df9384b.css" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-book-theme.css?digest=c3fdc42140077d1ad13ad2f1588a4309" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" />
    <link rel="stylesheet" type="text/css" href="_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" />
    
  <link rel="preload" as="script" href="_static/js/index.be7d3bbb2ef33a8344ce.js">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/sphinx-book-theme.12a9622fbb08dcb3a2a40b2c02b83a57.js"></script>
    <script async="async" src="https://unpkg.com/thebe@0.5.1/lib/index.js"></script>
    <script>
        const thebe_selector = ".thebe"
        const thebe_selector_input = "pre"
        const thebe_selector_output = ".output"
    </script>
    <script async="async" src="_static/sphinx-thebe.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tacit programming" href="Trains.html" />
    <link rel="prev" title="⍴⌽⊖⍉⍎⍕" href="Functions8.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="None">
    

    <!-- Google Analytics -->
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<div class="col-12 col-md-3 bd-sidebar site-navigation show" id="site-navigation">
    
        <div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/logo.png" class="logo" alt="logo">
      
      
      <h1 class="site-logo" id="site-title">APL Cultivations</h1>
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search this book..." aria-label="Search this book..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Intro.html">
   APL Cultivations
  </a>
 </li>
</ul>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="Arrays.html">
   Introduction to arrays
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="Functions.html">
   Primitive functions
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Functions1.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       +-×÷*⍟⌹○
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Functions2.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       !?|⌈⌊⊥⊤⊣⊢
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Functions3.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       =≤&lt;&gt;≥≡≢
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Functions4.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       ∨∧⍱⍲↑↓
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Functions5.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       ⊂⊃⊆⌷⍋⍒
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Functions6.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       ⍳⍸∊⍷∪∩~
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Functions7.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       /\⌿⍀,⍪
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Functions8.html">
     <code class="docutils literal notranslate">
      <span class="pre">
       ⍴⌽⊖⍉⍎⍕
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="current reference internal" href="#">
   User-defined functions
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Trains.html">
     Tacit programming
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Tradfns.html">
     Tradfns
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="SystemFunctions.html">
   System functions
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Behaviour.html">
     Behaviour, session
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Constants.html">
     Constants, tools and utils
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="CodeManagement.html">
     Code management, I/O, dates, errors
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="StackWorkspace.html">
     Stack and workspace info
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Regex.html">
     Regular expressions
     <code class="docutils literal notranslate">
      <span class="pre">
       ⎕R
      </span>
     </code>
     <code class="docutils literal notranslate">
      <span class="pre">
       ⎕S
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="Operators.html">
   Primitive operators
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="InDepth.html">
   Operators in depth
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Rank.html">
     Rank in depth
     <code class="docutils literal notranslate">
      <span class="pre">
       ⍤
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Power1.html">
     Power in depth:
     <code class="docutils literal notranslate">
      <span class="pre">
       f⍣k
      </span>
     </code>
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Power2.html">
     Power in depth:
     <code class="docutils literal notranslate">
      <span class="pre">
       f⍣g
      </span>
     </code>
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="ObjectOrientation.html">
   Object-oriented APL
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="Namespaces.html">
     Namespaces
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="ObjectsClasses.html">
     Objects and classes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="CtorsDtors.html">
     Constructors and destructors
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Properties.html">
     Properties
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="Inheritance.html">
     Inheritance and interfaces
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="AdvancedOO.html">
     Advanced OO techniques
    </a>
   </li>
  </ul>
 </li>
</ul>

    </div>
</nav> <!-- To handle the deprecated key -->

<div class="navbar_extra_footer">
  Powered by <a href="https://jupyterbook.org">Jupyter Book</a>
</div>

</div>


          


          
<main class="col py-md-3 pl-md-4 bd-content overflow-auto" role="main">
    
    <div class="topbar container-xl fixed-top">
    <div class="topbar-contents row">
        <div class="col-12 col-md-3 bd-topbar-whitespace site-navigation show"></div>
        <div class="col pl-md-4 topbar-main">
            
            <button id="navbar-toggler" class="navbar-toggler ml-0" type="button" data-toggle="collapse"
                data-toggle="tooltip" data-placement="bottom" data-target=".site-navigation" aria-controls="navbar-menu"
                aria-expanded="true" aria-label="Toggle navigation" aria-controls="site-navigation"
                title="Toggle navigation" data-toggle="tooltip" data-placement="left">
                <i class="fas fa-bars"></i>
                <i class="fas fa-arrow-left"></i>
                <i class="fas fa-arrow-up"></i>
            </button>
            
            
<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn" aria-label="Download this page"><i
            class="fas fa-download"></i></button>

    <div class="dropdown-buttons">
        <!-- ipynb file if we had a myst markdown file -->
        
        <!-- Download raw file -->
        <a class="dropdown-buttons" href="_sources/UserFunctions.ipynb"><button type="button"
                class="btn btn-secondary topbarbtn" title="Download source file" data-toggle="tooltip"
                data-placement="left">.ipynb</button></a>
        <!-- Download PDF via print -->
        <button type="button" id="download-print" class="btn btn-secondary topbarbtn" title="Print to PDF"
            onClick="window.print()" data-toggle="tooltip" data-placement="left">.pdf</button>
    </div>
</div>

            <!-- Source interaction buttons -->

<div class="dropdown-buttons-trigger">
    <button id="dropdown-buttons-trigger" class="btn btn-secondary topbarbtn"
        aria-label="Connect with source repository"><i class="fab fa-github"></i></button>
    <div class="dropdown-buttons sourcebuttons">
        <a class="repository-button"
            href="https://github.com/xpqz/cultivations"><button type="button" class="btn btn-secondary topbarbtn"
                data-toggle="tooltip" data-placement="left" title="Source repository"><i
                    class="fab fa-github"></i>repository</button></a>
        <a class="issues-button"
            href="https://github.com/xpqz/cultivations/issues/new?title=Issue%20on%20page%20%2FUserFunctions.html&body=Your%20issue%20content%20here."><button
                type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip" data-placement="left"
                title="Open an issue"><i class="fas fa-lightbulb"></i>open issue</button></a>
        
    </div>
</div>

            <!-- Full screen (wrap in <a> to have style consistency -->

<a class="full-screen-button"><button type="button" class="btn btn-secondary topbarbtn" data-toggle="tooltip"
        data-placement="bottom" onclick="toggleFullScreen()" aria-label="Fullscreen mode"
        title="Fullscreen mode"><i
            class="fas fa-expand"></i></button></a>

            <!-- Launch buttons -->

        </div>

        <!-- Table of contents -->
        <div class="d-none d-md-block col-md-2 bd-toc show">
            
        </div>
    </div>
</div>
    <div id="main-content" class="row">
        <div class="col-12 col-md-9 pl-md-3 pr-md-0">
        
              <div>
                
  <div class="tex2jax_ignore mathjax_ignore section" id="user-defined-functions">
<h1>User-defined functions<a class="headerlink" href="#user-defined-functions" title="Permalink to this headline">¶</a></h1>
<p>In APL, a function can be applied to data, that is, arrays. Note that “arrays” include scalars: a scalar is an array of rank 0.</p>
<p>There are three distinct types of functions, and several ways to create them. The types of functions are <em>tacit</em>, <em>dfns</em>, and <em>tradfns</em>.</p>
<p>Tacit and one-liner dfns can easiest be created by using simple assignment, like we do with arrays:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">avg</span><span class="kd">←</span><span class="o">+</span><span class="na">⌿</span><span class="o">÷</span><span class="m">1</span><span class="o">⌈≢</span>           <span class="c1">⍝ a tacit function</span>
<span class="nv">avg</span> <span class="m">7</span> <span class="m">6</span> <span class="m">2</span> <span class="m">9</span> <span class="m">6</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">5.25
</span></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">avg</span><span class="kd">←</span><span class="kt">{</span><span class="p">(</span><span class="o">+</span><span class="na">⌿</span><span class="bp">⍵</span><span class="p">)</span><span class="o">÷</span><span class="m">1</span><span class="o">⌈≢</span><span class="bp">⍵</span><span class="kt">}</span>     <span class="c1">⍝ a dfn version of the same function</span>
<span class="nv">avg</span> <span class="m">7</span> <span class="m">6</span> <span class="m">2</span> <span class="m">9</span> <span class="m">6</span> <span class="m">3</span> <span class="m">4</span> <span class="m">5</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">5.25
</span></div></div>
</div>
<p>You can’t have multi-line tacit functions, although tacit functions may consist of other multi-line non-tacit functions.</p>
<p>To create a multi-line dfn or tradfn called <code class="docutils literal notranslate"><span class="pre">foo</span></code>, the easiest way is to type <code class="docutils literal notranslate"><span class="pre">)ed</span> <span class="pre">foo</span></code> in the session (the REPL).
The editor will open with the first line pre-populated with the name <code class="docutils literal notranslate"><span class="pre">foo</span></code>. You can then start extending the function, e.g. to say (the <code class="docutils literal notranslate"><span class="pre">]dinput</span></code> thing is only required in a Jupyter notebook cell when entering multi-line functions, not in the session):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">dinput</span>
<span class="nv">r</span><span class="kd">←</span><span class="nv">foo</span> <span class="nv">nums</span>
<span class="nv">r</span><span class="kd">←</span><span class="s1">&#39;Here are your numbers: &#39;</span><span class="o">,⍕</span><span class="nv">nums</span>
</pre></div>
</div>
</div>
</div>
<p>Then press Esc to close and save your function in the workspace (the working container – you still need to save your workspace to disk later). The above is a tradfn. A tradfn is good for doing many things, one after another, things that may not necessarily be directly connected. The first line is a header line. It tells APL what the syntax is for that function. In our case, it says that <code class="docutils literal notranslate"><span class="pre">foo</span></code> has a result which will be referenced in the code as <code class="docutils literal notranslate"><span class="pre">r</span></code>, and it takes a single argument (which must be on the right) called <code class="docutils literal notranslate"><span class="pre">nums</span></code>. You can find the full model syntax for the header line <a class="reference external" href="https://help.dyalog.com/latest/#Language/Defined%20Functions%20and%20Operators/TradFns/Model%20Syntax.htm">here</a>.</p>
<p>Multi-line dfns look like this:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">dinput</span>
<span class="nv">foo</span><span class="kd">←</span><span class="kt">{</span>
    <span class="s1">&#39;Here are your numbers: &#39;</span><span class="o">,⍕</span><span class="bp">⍵</span>
<span class="kt">}</span>
</pre></div>
</div>
</div>
</div>
<p>In a dfn, the right argument is always called <code class="docutils literal notranslate"><span class="pre">⍵</span></code> and the result is not named, rather, the first statement which is not an assignment (or after a true guard – we can come back to that) is the result.</p>
<p>If a dfn needs a left argument (all dyadic APL functions are infix) it can be referenced with <code class="docutils literal notranslate"><span class="pre">⍺</span></code>.</p>
<p>Both tradfns and dfns can be made <em>shy</em>. It means that the function by default does not cause implicit display of its result, but the result can still be captured by any code on its left.</p>
<p>A tradfn can be made shy by enclosing its result name in curly braces:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">dinput</span>
<span class="kt">{</span><span class="nv">r</span><span class="kt">}</span><span class="kd">←</span><span class="nv">foo</span> <span class="nv">nums</span>
<span class="nv">r</span><span class="kd">←</span><span class="s1">&#39;Here are your numbers: &#39;</span><span class="o">,⍕</span><span class="nv">nums</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">foo</span> <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span>        <span class="c1">⍝ No output</span>
<span class="nv">vals</span><span class="kd">←</span><span class="nv">foo</span> <span class="m">1</span> <span class="m">2</span> <span class="m">3</span> <span class="m">4</span>   <span class="c1">⍝ Capture return</span>
<span class="nv">vals</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Here are your numbers: 1 2 3 4
</span></div></div>
</div>
<p>A dfn can be made shy by letting the last statement be after a <em>guard</em>, and have an assignment:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">dinput</span>
<span class="nv">foo</span><span class="kd">←</span><span class="kt">{</span>
    <span class="m">1</span><span class="bp">:</span><span class="nv">a</span><span class="kd">←</span><span class="s1">&#39;Here are your numbers: &#39;</span><span class="o">,⍕</span><span class="bp">⍵</span>
<span class="kt">}</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">foo</span> <span class="m">4</span> <span class="m">5</span> <span class="m">6</span> <span class="m">7</span>        <span class="c1">⍝ No output</span>
<span class="nv">vals</span><span class="kd">←</span><span class="nv">foo</span> <span class="m">4</span> <span class="m">5</span> <span class="m">6</span> <span class="m">7</span>   <span class="c1">⍝ Capture return</span>
<span class="nv">vals</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Here are your numbers: 4 5 6 7
</span></div></div>
</div>
<p>In most circumstances, you should avoid using shyness, though. It can be confusing.</p>
<p>A <em>guard</em> is a dfn-specific feature. It consists of a statement (a condition) which must evaluate to a Boolean (i.e. 0 or 1), followed by a colon (:) followed by the result of the function if the condition is true.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">istrue</span><span class="kd">←</span><span class="kt">{</span><span class="bp">⍵:</span><span class="s1">&#39;true&#39;</span> <span class="p">⋄</span> <span class="s1">&#39;false&#39;</span><span class="kt">}</span>  <span class="c1">⍝ a guard statement</span>

<span class="nv">istrue</span> <span class="m">1</span>
<span class="nv">istrue</span> <span class="m">0</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">true
</span></div><div class="output text_html"><span style="white-space:pre; font-family: monospace">false
</span></div></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">⋄</span></code> and line breaks are equivalent in almost all cases. One difference is that when you trace through a function, you can only execute one line at a time, even if it has multiple statements separated by <code class="docutils literal notranslate"><span class="pre">⋄</span></code>.  Also, one-liner dfns, even if they have <code class="docutils literal notranslate"><span class="pre">⋄</span></code>s, cannot be suspended or traced into – they will always execute completely and quit. If an error happens, the stack is cut back to their caller. This is actually useful, to prevent your program from stopping in a bad state.</p>
<p>Tacit, tradfns and dfns end up being different, even though their outwards behaviour may be identical. They have different detailed <em>name classification</em>. <code class="docutils literal notranslate"><span class="pre">⎕NC</span></code> (<a class="reference external" href="https://help.dyalog.com/latest/#Language/System%20Functions/nc.htm">Name Classification</a>) is a system function which takes one or more names and tells you something about them:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="sr">]</span><span class="nv">dinput</span>
<span class="kt">{</span><span class="nv">r</span><span class="kt">}</span><span class="kd">←</span><span class="nv">foo</span> <span class="nv">nums</span>                       <span class="c1">⍝ example tradfn</span>
<span class="nv">r</span><span class="kd">←</span><span class="s1">&#39;Here are your numbers: &#39;</span><span class="o">,⍕</span><span class="nv">nums</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">avg</span><span class="kd">←</span><span class="o">+</span><span class="na">⌿</span><span class="o">÷</span><span class="m">1</span><span class="o">⌈≢</span>                         <span class="c1">⍝ example tacit</span>
<span class="nv">istrue</span><span class="kd">←</span><span class="kt">{</span><span class="bp">⍵:</span><span class="s1">&#39;true&#39;</span> <span class="p">⋄</span> <span class="s1">&#39;false&#39;</span><span class="kt">}</span>        <span class="c1">⍝ example dfn</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nf">⎕NC</span> <span class="s1">&#39;foo&#39;</span> <span class="s1">&#39;avg&#39;</span> <span class="s1">&#39;istrue&#39;</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">3.1 3.3 3.2
</span></div></div>
</div>
<p>APL distinguishes between two types of functions when it comes to applying to data: <em>scalar functions</em> and <em>mixed functions</em>.</p>
<p>Scalar functions penetrate the entire structure of the given arrays, all the way until the simple scalars; hence the name. Mixed functions apply to some larger structures, sometimes only regarding one argument, while the other is treated as scalars.</p>
<p>Examples of scalar functions are the arithmetic functions; <code class="docutils literal notranslate"><span class="pre">+</span> <span class="pre">-</span> <span class="pre">×</span> <span class="pre">÷</span> <span class="pre">⌈</span> <span class="pre">⌊</span></code> etc. Scalar functions also have something called scalar extension: not only do the functions “pair up” the data, like how <code class="docutils literal notranslate"><span class="pre">1</span> <span class="pre">2</span> <span class="pre">3+10</span> <span class="pre">20</span> <span class="pre">30</span></code> gives <code class="docutils literal notranslate"><span class="pre">11</span> <span class="pre">22</span> <span class="pre">33</span></code>, but they also distribute scalars to all the elements of the other argument, e.g. how <code class="docutils literal notranslate"><span class="pre">1+10</span> <span class="pre">20</span> <span class="pre">30</span></code> gives <code class="docutils literal notranslate"><span class="pre">11</span> <span class="pre">21</span> <span class="pre">31</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="m">1</span> <span class="m">2</span> <span class="m">3</span><span class="o">+</span><span class="m">10</span> <span class="m">20</span> <span class="m">30</span> 
<span class="m">1</span><span class="o">+</span><span class="m">10</span> <span class="m">20</span> <span class="m">30</span>       
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">11 22 33
</span></div><div class="output text_html"><span style="white-space:pre; font-family: monospace">11 21 31
</span></div></div>
</div>
<p>This is useful, because it means you can enclose pieces of your data to tell APL that something should be distributed. This also lets us see the benefit of having both rank and depth.</p>
<p>E.g. <code class="docutils literal notranslate"><span class="pre">⍺∊⍵</span></code> looks if each element of <code class="docutils literal notranslate"><span class="pre">⍺</span></code> is a member of <code class="docutils literal notranslate"><span class="pre">⍵</span></code>.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="s1">&#39;hello&#39;</span><span class="o">∊</span><span class="s1">&#39;CodeGolf&#39;</span>
<span class="s1">&#39;hello&#39;</span><span class="o">∊</span><span class="s1">&#39;Code&#39;</span> <span class="s1">&#39;Golf&#39;</span>
<span class="p">(</span><span class="o">⊂</span><span class="s1">&#39;hello&#39;</span><span class="p">)</span><span class="o">∊</span><span class="s1">&#39;Code&#39;</span> <span class="s1">&#39;Golf&#39;</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">0 1 1 1 1
</span></div><div class="output text_html"><span style="white-space:pre; font-family: monospace">0 0 0 0 0
</span></div><div class="output text_html"><span style="white-space:pre; font-family: monospace">0
</span></div></div>
</div>
<p>The first example looks whether each element of <code class="docutils literal notranslate"><span class="pre">'hello'</span></code> is a member of <code class="docutils literal notranslate"><span class="pre">'CodeGolf'</span></code>. The second looks whether each element of <code class="docutils literal notranslate"><span class="pre">'hello'</span></code> is a member of the list of words. Of course, there are no single letters in the list of words. The last example looks whether the word <code class="docutils literal notranslate"><span class="pre">'hello'</span></code> is in the list on the right.</p>
<p>Sometimes, this isn’t enough, though. Sometimes you want to apply your function is a non-standard way. This is where operators come in. APL operators (higher-order functions) take one or two functions as operands and apply them in a specific way.</p>
<p>For example, <code class="docutils literal notranslate"><span class="pre">¨</span></code> (called <a class="reference external" href="https://help.dyalog.com/latest/#Language/Primitive%20Operators/Each%20with%20Monadic%20Operand.htm">each</a>) is a monadic operator which applies its operand function to each element of the argument(s). Take, for example, the monadic function <code class="docutils literal notranslate"><span class="pre">≢</span></code> which tallies the length of its argument:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">≢</span><span class="s1">&#39;Code&#39;</span> <span class="s1">&#39;Golf&#39;</span>
<span class="o">≢</span><span class="na">¨</span><span class="s1">&#39;Code&#39;</span> <span class="s1">&#39;Golf&#39;</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">2
</span></div><div class="output text_html"><span style="white-space:pre; font-family: monospace">4 4
</span></div></div>
</div>
<p>So while <code class="docutils literal notranslate"><span class="pre">¨</span></code> digs into an array, <a class="reference external" href="https://help.dyalog.com/latest/#Language/Primitive%20Operators/Rank.htm">rank</a>, <code class="docutils literal notranslate"><span class="pre">⍤</span></code>, applies the function to sub-arrays of a specific rank. For example, <code class="docutils literal notranslate"><span class="pre">≢⍤1</span></code> applies <em>Tally</em> to rank 1; that is vectors, thus finding the length of each row (they are of course the same, as all rows in a matrix must be equal length, but you get the idea):</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="o">⊢</span><span class="nv">A</span><span class="kd">←</span><span class="m">2</span> <span class="m">4</span><span class="o">⍴</span><span class="s1">&#39;CodeGolf&#39;</span>
<span class="p">(</span><span class="o">≢</span><span class="na">⍤</span><span class="m">1</span><span class="p">)</span> <span class="nv">A</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">Code
Golf
</span></div><div class="output text_html"><span style="white-space:pre; font-family: monospace">4 4
</span></div></div>
</div>
<p>You can also define your own operators. There are only two types; <em>dops</em> and <em>tradops</em>. There are no tacit operators in APL. Tradops are much like tradfns. The only real difference is the header line. So while a tradfn header can look like <code class="docutils literal notranslate"><span class="pre">result←function</span> <span class="pre">arg</span></code>, a tradop header can look like <code class="docutils literal notranslate"><span class="pre">result←(fn</span> <span class="pre">operator)arg</span></code>. This tells APL that operator takes a single function <code class="docutils literal notranslate"><span class="pre">fn</span></code> as operand, and the resulting combined function is monadic (takes just the right-argument <code class="docutils literal notranslate"><span class="pre">arg</span></code>.</p>
<p>In a dop, much like a dfn, the arguments and operands have fixed names, and the result is the first non-assignment.
The dops’ name of its left (or only) operand is <code class="docutils literal notranslate"><span class="pre">⍺⍺</span></code> and the right operand is <code class="docutils literal notranslate"><span class="pre">⍵⍵</span></code>. The arguments are <code class="docutils literal notranslate"><span class="pre">⍺</span></code> and <code class="docutils literal notranslate"><span class="pre">⍵</span></code> just like in a dfn.</p>
<p>For example, we can create a dop <code class="docutils literal notranslate"><span class="pre">twice</span></code> which applies the left argument with the operand two times:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">twice</span><span class="kd">←</span><span class="kt">{</span><span class="bp">⍺</span> <span class="bp">⍺⍺</span> <span class="bp">⍺</span> <span class="bp">⍺⍺</span> <span class="bp">⍵</span><span class="kt">}</span>
<span class="m">2</span><span class="o">+</span><span class="nv">twice</span> <span class="m">5</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><span style="white-space:pre; font-family: monospace">9
</span></div></div>
</div>
<p>Note that this is different than defining <code class="docutils literal notranslate"><span class="pre">plustwice←{⍺+⍺+⍵}</span></code>, because the operator can be applied to many different functions, in fact <em>all</em> (dyadic, in our case) functions.</p>
<p>My favourite defined operator is <code class="docutils literal notranslate"><span class="pre">under</span></code>:</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-APL notranslate"><div class="highlight"><pre><span></span><span class="nv">under</span><span class="kd">←</span><span class="kt">{</span><span class="p">(</span><span class="bp">⍵⍵</span><span class="na">⍣</span><span class="m">¯1</span><span class="p">)</span> <span class="p">(</span><span class="bp">⍵⍵</span> <span class="bp">⍺</span><span class="p">)</span> <span class="bp">⍺⍺</span> <span class="p">(</span><span class="bp">⍵⍵</span> <span class="bp">⍵</span><span class="p">)</span><span class="kt">}</span>
</pre></div>
</div>
</div>
</div>
<p>Any guesses as to what it does?</p>
<p><code class="docutils literal notranslate"><span class="pre">⍣</span></code> is another operator, which applies the function on its left as many times as indicated by its right operand.
This also shows that operands may be both functions and arrays, the syntax is the same. <code class="docutils literal notranslate"><span class="pre">⍺⍺</span></code> and <code class="docutils literal notranslate"><span class="pre">⍵⍵</span></code> may each be a function or an array. <code class="docutils literal notranslate"><span class="pre">f⍣¯1</span></code> means apply <code class="docutils literal notranslate"><span class="pre">f</span></code> negative one time, i.e. apply the <em>inverse</em> of <code class="docutils literal notranslate"><span class="pre">f</span></code>. The inverse of <code class="docutils literal notranslate"><span class="pre">⍟</span></code> (log) is <code class="docutils literal notranslate"><span class="pre">*</span></code> (power).</p>
<p>Power is to multiplication what multiplication is to addition, so <code class="docutils literal notranslate"><span class="pre">×under⍟</span></code> is power. <code class="docutils literal notranslate"><span class="pre">*under⍟</span></code> is <a class="reference external" href="https://en.wikipedia.org/wiki/Tetration">tetration</a>.</p>
<div class="toctree-wrapper compound">
</div>
</div>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "dyalog-kernel"
        },
        kernelOptions: {
            kernelName: "dyalog-kernel",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'dyalog-kernel'</script>

              </div>
              
        
            <!-- Previous / next buttons -->
<div class='prev-next-area'> 
    <a class='left-prev' id="prev-link" href="Functions8.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title"><code class="docutils literal notranslate"><span class="pre">⍴⌽⊖⍉⍎⍕</span></code></p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="Trains.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Tacit programming</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
        
        </div>
    </div>
    <footer class="footer">
    <div class="container">
      <p>
        
          By Adám Brudzewsky (edited by Stefan Kruger)<br/>
        
          <div class="extra_footer">
            <p><a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">
  <img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" />
</a></p>
<p>This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>.</p>

          </div>
      </p>
    </div>
  </footer>
</main>


      </div>
    </div>
  
  <script src="_static/js/index.be7d3bbb2ef33a8344ce.js"></script>

  </body>
</html>